<!DOCTYPE html>
<html>
	<head>
		<!-- En-tete du site -->
		<!-- Compatible avec mobile -->
		<title>Une bouteille à la mer!</title>
		<meta name="main" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Une Bouteille à la mer!, Android, Smartphone, Iphone" />
		<link href="../css/style.css" rel="stylesheet" type="text/css" media="all" />
	</head>
	
	<!-- Code de la page principale -->
	<body>
		<div class="page">
			<div class="navigation_menu">
				<MENU>
					<ONGLET><a href="../index.html" class="animation_onglet">Accueil</a></ONGLET>
					<ONGLET><a href="projet.html" class="animation_onglet">Le projet</a></ONGLET>
					<ONGLET class="active"><a href="carte.html">Les bouteilles</a></ONGLET>
					<ONGLET><a href="photos.html" class="animation_onglet">Galerie de photos</a></ONGLET>
					<ONGLET><a href="bouteille.html" class="animation_onglet">Déplacer une bouteille</a></ONGLET>
					<ONGLET><a href="contact.html" class="animation_onglet">Nous joindre</a></ONGLET>
				</MENU> <!-- Fin de la division menu -->
			</div> <!-- Fin de la division navigation_menu -->
			
			<div id="Map"> <!-- Division MAP -->
				<div id="conteneurMap" style="margin-right: auto; margin-left: auto; margin-top: 25px;
												width:80%;height:500px;"></div>
			</div><!-- Fin de la division Map -->
			<div class="notice">
				<p>© 2016 Une bouteille à la mer. Tous droits réservés | Créé par AMD Labs</p>
				<div>Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
			</div>
		</div> <!-- Fin de la division Page -->
		
		<!-- --------- SCRIPT ----------- -->
		<script>
		//<!-- ------- INITIALISATION de la carte---------- -->
		
				var map;
				var key = "AIzaSyDpHfRu7fxHjTrvoM0SQLhFp8K8Ehi_NUA";
				
				function initialize() {
					var mapElement = document.getElementById('conteneurMap');
					
					map = new google.maps.Map(mapElement,{
						zoom:7,
						maxZoom:16,
						center:new google.maps.LatLng(45.5087, -73.554)
					});
					
					//Initialiser le script.
					var script = document.createElement('script');
					script.src = '../script/javascript.js';
					document.getElementsByTagName('head')[0].appendChild(script);
					
					
				}
		//<!-- ------- INFOBOX et DONNEES ---------- -->
			
				// Boucler dans le résultat du script et enregistrer chacun des points et lignes.
				//Retour du script.
					  window.donnees_callback = function(results) {
						for (var i = 0; i < results.features.length; i++) {
							
								//On s'occupe des lignes.
								var color = results.features[i].color;
								
								var path = new Array();
							
								for(var j = 0; j < results.features[i].geometry.geometries[0].coordinates[j].lenght; j++){
									var latLng = new google.maps.LatLng(results.features[i].geometry.geometries[0].coordinates[j][1],results.features[i].geometry.geometries[0].coordinates[j][0]);
									path.push(latLng);
								}
							
								var ligne = new google.maps.Polyline({
									strokeColor: color,
								  	strokeWeight: 3,
								  	strokeOpacity: 1,
									path: path
								});
							
								this.map.data.add(ligne);

								//Mouse In/Out
								ligne.addListener('mouseover', function(event) {
									this.map.data.revertStyle();
									this.map.data.overrideStyle(event.feature, {strokeWeight: 5});
								});

								ligne.addListener('mouseout', function(event) {
									this.map.data.revertStyle();
								});
								
							
								//On s'occupe des point
									var coordsPoint = results.features[i].geometry.geometries[1].coordinates;
									var latLng = new google.maps.LatLng(coordsPoint[1],coordsPoint[0]);
									var marker = new google.maps.Marker({
										position: latLng,
										map: map,
										icon: '../ressource/logoBouteille.png'
									});
							
									var contentString =   '<div id="content">'+
														  '<div id="siteNotice">'+
															  '</div>'+
															  '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
															  '<div id="bodyContent">'+
																'<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
																'sandstone rock formation in the southern part of the '+
																'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
																'south west of the nearest large town, Alice Springs; 450&#160;km '+
																'(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
																'features of the Uluru - Kata Tjuta National Park. Uluru is '+
																'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
																'Aboriginal people of the area. It has many springs, waterholes, '+
																'rock caves and ancient paintings. Uluru is listed as a World '+
																'Heritage Site.</p>'+
																'<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
																'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
																'(last visited June 22, 2009).</p>'+
															  '</div>'+
													  '</div>';

									var infowindow = new google.maps.InfoWindow({
										content: contentString,
										maxWidth: 200
									});

									marker.addListener('click', function() {
										infowindow.open(map, marker);
									});
						}
						  
					}
					  
			</script>
			<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpHfRu7fxHjTrvoM0SQLhFp8K8Ehi_NUA&callback=initialize">
			</script>
	</body>
</html>